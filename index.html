<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mock Tracker</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f9;
  margin: 0;
  padding: 20px;
}

header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

header img {
  height: 40px;
}

.card {
  background: #fff;
  padding: 18px;
  border-radius: 10px;
  margin-bottom: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,.08);
}

.grid-2 {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 14px;
}

.grid-5 {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 12px;
}

input, select, button {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

button {
  cursor: pointer;
  border: none;
}

.btn-primary { background:#0d6efd;color:#fff; }
.btn-success { background:#198754;color:#fff; }
.btn-light { background:#eee; }

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}

.analysis {
  display: none;
  margin-top: 12px;
  background: #f9fafb;
  padding: 12px;
  border-radius: 8px;
}
</style>
</head>

<body>

<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/2/2e/Flag_of_India.svg">
  <img src="https://upload.wikimedia.org/wikipedia/commons/a/ab/Logo_TV_2015.png">
  <h2>Mock Test Tracker</h2>
</header>

<!-- TEST TRACKER -->
<div class="card">
<h3>Test Tracker</h3>

<div class="grid-2">
  <input id="exam" placeholder="Exam">
  <input id="test" placeholder="Test Name">
  <input id="date" type="date">
  <input id="platform" placeholder="Platform">
</div>

<br>

<div class="grid-2">
  <input id="target" placeholder="Target Score">
  <input id="negative" placeholder="Negative Marks">
</div>

</div>

<!-- SECTION MARKS -->
<div class="card">
<h3>Section Marks</h3>

<table id="sectionTable">
<thead>
<tr>
<th>Section</th><th>Marks</th><th>C</th><th>W</th><th>U</th>
</tr>
</thead>
<tbody></tbody>
</table>

<br>
<button class="btn-primary" onclick="addSection()">+ Add Section</button>
<button class="btn-success" onclick="saveTest()">üíæ Save Test</button>
</div>

<!-- VIEW -->
<div class="card">
<select id="examFilter" onchange="renderTable()">
<option>All Exams</option>
</select>

<br><br>

<button class="btn-light" onclick="showGraph()">üìä Show Graph</button>
<button class="btn-light" onclick="exportExcel()">üìÅ Export Excel</button>
<button class="btn-light" onclick="exportPDF()">üìÑ Export PDF</button>

<table id="testTable"></table>
</div>

<script>
let data = JSON.parse(localStorage.getItem("mockData") || "[]");

function addSection() {
  const row = `
  <tr>
    <td><input></td>
    <td><input type="number"></td>
    <td><input type="number"></td>
    <td><input type="number"></td>
    <td><input type="number"></td>
  </tr>`;
  document.querySelector("#sectionTable tbody").insertAdjacentHTML("beforeend", row);
}

function saveTest() {
  const sections = [...document.querySelectorAll("#sectionTable tbody tr")].map(r=>{
    const i=r.querySelectorAll("input");
    return {
      name:i[0].value,
      marks:+i[1].value,
      c:+i[2].value,
      w:+i[3].value,
      u:+i[4].value
    }
  });

  const test = {
    exam: exam.value,
    test: test.value,
    date: date.value,
    platform: platform.value,
    target: target.value,
    negative: negative.value,
    sections
  };

  data.push(test);
  localStorage.setItem("mockData", JSON.stringify(data));
  renderTable();
}

function renderTable() {
  const table = document.getElementById("testTable");
  table.innerHTML = `
  <tr><th>Exam</th><th>Test</th><th>Date</th><th>Avg</th></tr>`;

  data.forEach((t,i)=>{
    const avg = (t.sections.reduce((a,b)=>a+b.marks,0)/t.sections.length).toFixed(1);
    table.innerHTML += `
    <tr onclick="toggleAnalysis(${i})">
      <td>${t.exam}</td><td>${t.test}</td><td>${t.date}</td><td>${avg}</td>
    </tr>
    <tr><td colspan="4">
      <div id="a${i}" class="analysis">
        ${t.sections.map(s=>`
          <b>${s.name}</b> ‚Üí C:${s.c} W:${s.w} U:${s.u}<br>`).join("")}
      </div>
    </td></tr>`;
  });
}

function toggleAnalysis(i){
  const el=document.getElementById("a"+i);
  el.style.display = el.style.display==="block"?"none":"block";
}

function showGraph(){ alert("Graph placeholder"); }
function exportExcel(){ alert("Excel placeholder"); }
function exportPDF(){ alert("PDF placeholder"); }

addSection();
renderTable();
</script>

</body>
</html>
